{"version":3,"file":"js/453.535bc8b6.js","mappings":"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","sources":["webpack://project_macaron/./src/views/DashBoard/LoginView.vue","webpack://project_macaron/./src/views/DashBoard/LoginView.vue?d51a"],"sourcesContent":["<template>\r\n  <LoadingVue :active=\"isLoading\"></LoadingVue>\r\n  <div\r\n    class=\"d-flex flex-column\"\r\n    style=\"\r\n      min-height: 100vh;\r\n      background-image: url(https://storage.googleapis.com/vue-course-api.appspot.com/nn_macaron/1702358732265.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=HfvexqBUIB45NzvHNtthSrfJKr2YI8wsveCN%2F2oXaew2ilPiL7a2wdZciHOlTA6D%2BLFKJumOAt%2FlGJ003ZEp%2FiRmq416egwi61ludKxcXUsYvECX5LxXJMgIS7prbpxI%2F2BEIH31DxGHifMbUAL5Ctc1MvJ7hK4NBVbo7HqdV5w%2FaVRVm5r%2FtOe2G%2FpIfzEz%2BpXHQN%2FTQwZTKzz4Ef6Ki0nEG2Wxt9PKgayXngBoTLTqWwYW518zgIjgAUm16y3qEry7kK81blGWAsSRO%2FX5KVC4KfiuxJW%2F5dOPVoTbmbUB1JawJn4tlH9%2FP9SoynjDF%2FkyQPS6rfx1CFiLaurOpw%3D%3D);\r\n      background-size: cover;\r\n      background-position: top center;\r\n    \"\r\n  >\r\n    <DashBoardNav :isLogin=\"false\"></DashBoardNav>\r\n    <div class=\"container\">\r\n      <ToastList></ToastList>\r\n    </div>\r\n    <div class=\"container py-5 flex-grow-1 d-flex align-items-center\">\r\n      <div class=\"row w-100 justify-content-center\">\r\n        <div class=\"col-lg-5\">\r\n          <div class=\"p-3 bg-light bg-opacity-25\">\r\n            <h2 class=\"text-center mb-4 text-secondary\">後台登入</h2>\r\n            <VForm v-slot=\"{ errors, validate }\">\r\n              <div class=\"form-floating mb-4\">\r\n                <VField\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  id=\"username\"\r\n                  class=\"form-control\"\r\n                  :class=\"{ 'is-invalid': errors['email'] }\"\r\n                  rules=\"email|required\"\r\n                  v-model=\"user.username\"\r\n                  placeholder=\"請輸入帳號\"\r\n                >\r\n                </VField>\r\n                <ErrorMessage\r\n                  name=\"email\"\r\n                  class=\"invalid-feedback\"\r\n                ></ErrorMessage>\r\n                <label for=\"username\">帳號</label>\r\n              </div>\r\n              <div class=\"form-floating mb-4\">\r\n                <VField\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  id=\"password\"\r\n                  class=\"form-control\"\r\n                  :class=\"{ 'is-invalid': errors['password'] }\"\r\n                  rules=\"required\"\r\n                  v-model=\"user.password\"\r\n                  placeholder=\"請輸入帳號\"\r\n                >\r\n                </VField>\r\n                <ErrorMessage\r\n                  name=\"password\"\r\n                  class=\"invalid-feedback\"\r\n                ></ErrorMessage>\r\n                <label for=\"password\">密碼</label>\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-secondary w-100\"\r\n                @click=\"submit(validate)\"\r\n              >\r\n                登入\r\n              </button>\r\n            </VForm>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DashBoardNav from '@/components/DashBoardNav.vue'\r\nimport ToastList from '@/components/ToastList.vue'\r\nimport emitter from '@/methods/emitter.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  components: {\r\n    DashBoardNav,\r\n    ToastList\r\n  },\r\n  provide() {\r\n    return {\r\n      emitter\r\n    }\r\n  },\r\n  methods: {\r\n    async submit(validate) {\r\n      try {\r\n        const isValid = await validate()\r\n        if (!isValid.valid) return\r\n      } catch (e) {\r\n        emitter.emit('sendMsg', {\r\n          message: '表單驗證失敗',\r\n          status: 'error'\r\n        })\r\n        return\r\n      }\r\n      this.isLoading = true\r\n      const API_LOGIN = `${process.env.VUE_APP_API}admin/signin`\r\n      this.axios\r\n        .post(API_LOGIN, this.user)\r\n        .then((res) => {\r\n          this.isLoading = false\r\n          if (res.data.success) {\r\n            const { token, expired } = res.data\r\n            document.cookie = `webToken=${token}; expires=${new Date(expired)}`\r\n            this.$router.push('/dashboard/products')\r\n          } else {\r\n            emitter.emit('sendMsg', {\r\n              message: res.data.message,\r\n              status: 'error'\r\n            })\r\n            this.user.password = ''\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          emitter.emit('sendMsg', {\r\n            message: `登入失敗(${e})`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    window.scrollTo({ top: 0 })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./LoginView.vue?vue&type=template&id=139c0206\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","for","_createVNode","_component_LoadingVue","active","$data","isLoading","_hoisted_1","_component_DashBoardNav","isLogin","_hoisted_2","_component_ToastList","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_component_VForm","errors","validate","_hoisted_8","_component_VField","type","name","id","_normalizeClass","rules","user","username","$event","placeholder","_component_ErrorMessage","_hoisted_9","_hoisted_10","password","_hoisted_11","onClick","$options","submit","_hoisted_12","data","components","DashBoardNav","ToastList","provide","emitter","methods","isValid","valid","e","emit","message","status","this","API_LOGIN","axios","post","then","res","success","token","expired","document","cookie","Date","$router","push","catch","created","window","scrollTo","top","__exports__","render"],"sourceRoot":""}