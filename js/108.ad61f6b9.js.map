{"version":3,"file":"js/108.ad61f6b9.js","mappings":"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","sources":["webpack://project_macaron/./src/views/DashBoard/OrderList.vue","webpack://project_macaron/./src/components/OrderModal.vue","webpack://project_macaron/./src/components/OrderModal.vue?b91a","webpack://project_macaron/./src/views/DashBoard/OrderList.vue?6ffe"],"sourcesContent":["<template>\r\n  <LoadingVue :active=\"isLoading\" style=\"z-index: 1056\"></LoadingVue>\r\n  <OrderModal :temp-order=\"tempOrder\" @update-order=\"updateOrder\" ref=\"orderModal\"></OrderModal>\r\n  <div class=\"pt-4 py-3\">\r\n    <h2 class=\"m-0 text-secondary fw-bolder\">訂單列表</h2>\r\n  </div>\r\n  <table class=\"table table-hover align-middle\">\r\n    <thead>\r\n      <tr>\r\n        <th>訂單日期</th>\r\n        <th>訂單編號</th>\r\n        <th>訂單狀態</th>\r\n        <th>訂購人</th>\r\n        <th>使用優惠券</th>\r\n        <th class=\"text-end\">訂單金額</th>\r\n        <th width=\"250\" class=\"text-center\">查看內容/刪除</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody v-if=\"orderList.length > 0\">\r\n      <tr v-for=\"(order, key) in orderList\" :key=\"'order' + key\">\r\n        <td>{{ this.$filters.unixToDate(order.create_at) }}</td>\r\n        <td>{{ order.id }}</td>\r\n        <td :class=\"{'text-danger': !order.is_paid}\">{{ order.is_paid ? '訂單已完成' : '尚未付款' }}</td>\r\n        <td>{{ order.user.name }}</td>\r\n        <td>{{ Object.values(order.products)[0].coupon ? Object.values(order.products)[0].coupon.title: '無' }}</td>\r\n        <td class=\"text-end\">{{ `$${$filters.currency(order.total)}` }}</td>\r\n        <td class=\"text-center\">\r\n          <div\r\n            class=\"btn-group btn-group-sm\"\r\n            role=\"group\"\r\n            aria-label=\"Basic example\"\r\n          >\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-outline-success\"\r\n              @click=\"editProduct(order)\"\r\n            >\r\n            查看內容\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-outline-danger\"\r\n              @click=\"deleteOrder(order)\"\r\n            >\r\n              刪除\r\n            </button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <pagination :page-info=\"pageInfo\" @set-page=\"getOrderList\"></pagination>\r\n</template>\r\n\r\n<script>\r\nimport OrderModal from '@/components/OrderModal.vue'\r\nimport pagination from '@/components/PaginationItem.vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderList: [],\r\n      tempOrder: {},\r\n      isLoading: false,\r\n      pageInfo: {}\r\n    }\r\n  },\r\n  components: {\r\n    OrderModal,\r\n    pagination\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getOrderList(page = 1) {\r\n      this.isLoading = true\r\n      window.scrollTo({ top: 0 })\r\n      const API_GETORDER = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`\r\n      this.axios\r\n        .get(API_GETORDER)\r\n        .then((res) => {\r\n          this.isLoading = false\r\n          if (!res.data.success) {\r\n            this.emitter.emit('sendMsg', {\r\n              message: `訂單讀取失敗：${res.data.message}`,\r\n              status: 'error'\r\n            })\r\n          } else {\r\n            this.orderList = res.data.orders\r\n            this.pageInfo = res.data.pagination\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.emitter.emit('sendMsg', {\r\n            message: `訂單讀取失敗：${e}`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    },\r\n    editProduct(order) {\r\n      this.tempOrder = order\r\n      this.$refs.orderModal.showModal()\r\n    },\r\n    deleteOrder(order) {\r\n      this.isLoading = true\r\n      const API_DELETEORDER = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${order.id}`\r\n      this.axios\r\n        .delete(API_DELETEORDER)\r\n        .then((res) => {\r\n          this.isLoading = false\r\n          if (!res.data.success) {\r\n            this.emitter.emit('sendMsg', {\r\n              message: `訂單刪除失敗：${res.data.message}`,\r\n              status: 'error'\r\n            })\r\n          } else {\r\n            this.emitter.emit('sendMsg', {\r\n              message: '訂單已刪除',\r\n              status: 'success'\r\n            })\r\n            this.getOrderList(this.pageInfo.current_page)\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.emitter.emit('sendMsg', {\r\n            message: `訂單刪除失敗：${e}`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    },\r\n    updateOrder(order) {\r\n      const data = JSON.parse(JSON.stringify(order))\r\n      data.is_paid = !data.is_paid\r\n      const API_UPDATEORDER = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${data.id}`\r\n      this.axios\r\n        .put(API_UPDATEORDER, { data })\r\n        .then((res) => {\r\n          this.isLoading = false\r\n          if (!res.data.success) {\r\n            this.emitter.emit('sendMsg', {\r\n              message: `訂單更新失敗：${res.data.message}`,\r\n              status: 'error'\r\n            })\r\n          } else {\r\n            this.emitter.emit('sendMsg', {\r\n              message: '已更新訂單資訊',\r\n              status: 'success'\r\n            })\r\n            this.tempOrder = data\r\n            this.getOrderList(this.pageInfo.current_page)\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.emitter.emit('sendMsg', {\r\n            message: `訂單更新失敗：${e}`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.getOrderList()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <LoadingVue :active=\"isLoading\" style=\"z-index: 1056\"></LoadingVue>\r\n  <div class=\"modal fade\" tabindex=\"-1\" ref=\"orderModal\">\r\n    <div class=\"modal-dialog modal-lg modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header bg-secondary\">\r\n          <h1 class=\"modal-title fs-5 text-white\">訂單內容</h1>\r\n          <button type=\"button\" class=\"btn-close\" @click=\"hideModal\"></button>\r\n        </div>\r\n        <div class=\"modal-body\" v-if=\"order.user\">\r\n          <div class=\"m-3 p-3 bg-secondary-subtle rounded\">\r\n            <h5 class=\"fw-bolder text-secondary\">訂單總覽</h5>\r\n            <div class=\"d-flex mb-1\">\r\n              <div class=\"me-5\">\r\n                <p class=\"mb-0 me-2 py-1\">\r\n                  <span class=\"fw-bolder pe-3\">訂單狀態</span\r\n                  ><span :class=\"{ 'text-danger': !order.is_paid }\">{{\r\n                    order.is_paid ? '訂單已完成' : '尚未付款'\r\n                  }}</span>\r\n                </p>\r\n                <p class=\"mb-2 mt-1\">\r\n                  <span class=\"fw-bolder pe-3\">訂單日期</span\r\n                  >{{ this.$filters.unixToDatetime(order.create_at) }}\r\n                </p>\r\n                <p class=\"mb-2\">\r\n                  <span class=\"fw-bolder pe-3\">訂單編號</span>{{ order.id }}\r\n                </p>\r\n              </div>\r\n              <div class=\"d-flex\">\r\n                <p class=\"mb-0 py-1\">\r\n                  <span class=\"fw-bolder pe-3\">修改狀態</span>\r\n                </p>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-sm btn-success py-1 me-2 align-self-start\"\r\n                  :class=\"{ disabled: order.is_paid }\"\r\n                  @click=\"$emit('updateOrder', order)\"\r\n                >\r\n                  已完成\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-sm btn-danger py-1 align-self-start\"\r\n                  :class=\"{ disabled: !order.is_paid }\"\r\n                  @click=\"$emit('updateOrder', order)\"\r\n                >\r\n                  未完成\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <table class=\"table border-dark mb-2\">\r\n              <thead>\r\n                <tr class=\"text-center\">\r\n                  <th>商品數量</th>\r\n                  <th>小計</th>\r\n                  <th>運費</th>\r\n                  <th>訂單優惠券</th>\r\n                  <th>優惠券折抵</th>\r\n                  <th>總計</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr class=\"text-center\">\r\n                  <td>\r\n                    共\r\n                    {{ orderItems.reduce((acc, cur) => (acc += cur.qty), 0) }}\r\n                    件\r\n                  </td>\r\n                  <td>\r\n                    {{\r\n                      `${$filters.currency(order.total + couponInfo.total)} 元`\r\n                    }}\r\n                  </td>\r\n                  <td>活動免運</td>\r\n                  <td>{{ couponInfo.title }}</td>\r\n                  <td>{{ `- ${$filters.currency(couponInfo.total)} 元` }}</td>\r\n                  <td>{{ `$ ${$filters.currency(order.total)} 元` }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div class=\"m-3 p-3 bg-secondary-subtle rounded\">\r\n            <h5 class=\"fw-bolder text-secondary\">訂購品項</h5>\r\n            <table class=\"table table-hover border-dark mb-2 text-center\">\r\n              <thead>\r\n                <tr>\r\n                  <th>品名</th>\r\n                  <th>產品代碼</th>\r\n                  <th>數量</th>\r\n                  <th>商品特價</th>\r\n                  <th class=\"text-end\">單價</th>\r\n                  <th class=\"text-end\">小計</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(item, key) in orderItems\" :key=\"'orderItems' + key\">\r\n                  <td>{{ item.product.title }}</td>\r\n                  <td>{{ item.product.id }}</td>\r\n                  <td>{{ item.qty }}</td>\r\n                  <td>\r\n                    {{\r\n                      item.product.price === item.product.origin_price\r\n                        ? '無'\r\n                        : `${Math.floor(\r\n                            (item.product.price / item.product.origin_price) *\r\n                              10\r\n                          )}折`\r\n                    }}\r\n                  </td>\r\n                  <td class=\"text-end\">\r\n                    {{ $filters.currency(item.product.price) }}\r\n                  </td>\r\n                  <td class=\"text-end\">\r\n                    {{ $filters.currency(item.final_total) }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div class=\"m-3 p-3 bg-secondary-subtle rounded\">\r\n            <h5 class=\"fw-bolder text-secondary\">訂購人資料</h5>\r\n            <p class=\"mb-2\">\r\n              <span class=\"fw-bolder pe-3\">配送方式</span\r\n              >{{ order.user.address }}\r\n            </p>\r\n            <p class=\"mb-2\">\r\n              <span class=\"fw-bolder pe-3\">訂單備註</span\r\n              >{{ order.message ? order.message : '無' }}\r\n            </p>\r\n            <table class=\"table border-dark mb-2 text-center\">\r\n              <thead>\r\n                <tr>\r\n                  <th>姓名</th>\r\n                  <th>連絡電話</th>\r\n                  <th>聯絡信箱</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>{{ order.user.name }}</td>\r\n                  <td>{{ order.user.tel }}</td>\r\n                  <td>{{ order.user.email }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"hideModal\">\r\n            關閉\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal'\r\nexport default {\r\n  data() {\r\n    return {\r\n      modal: {},\r\n      order: {},\r\n      orderItems: [],\r\n      couponInfo: {\r\n        total: '',\r\n        title: ''\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  props: ['tempOrder'],\r\n  emits: ['updateOrder'],\r\n  watch: {\r\n    tempOrder() {\r\n      this.getData()\r\n    }\r\n  },\r\n  methods: {\r\n    showModal() {\r\n      this.modal.show()\r\n    },\r\n    hideModal() {\r\n      this.modal.hide()\r\n      this.getData()\r\n    },\r\n    getData() {\r\n      this.order = JSON.parse(JSON.stringify(this.tempOrder))\r\n      this.orderItems = Object.values(this.order.products)\r\n      if (this.orderItems[0].coupon) {\r\n        this.couponInfo.total =\r\n          this.order.total / (this.orderItems[0].coupon.percent / 100) -\r\n          this.order.total\r\n        this.couponInfo.title = `${this.orderItems[0].coupon.code} ${this.orderItems[0].coupon.title}`\r\n      } else {\r\n        this.couponInfo.total = 0\r\n        this.couponInfo.title = '無'\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.modal = new Modal(this.$refs.orderModal, { backdrop: 'static' })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./OrderModal.vue?vue&type=template&id=06698b19\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OrderList.vue?vue&type=template&id=566e0996\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","width","role","_createVNode","_component_LoadingVue","active","$data","isLoading","style","_component_OrderModal","tempOrder","onUpdateOrder","$options","updateOrder","ref","_hoisted_1","_hoisted_2","_hoisted_3","orderList","length","_createElementBlock","_hoisted_4","_Fragment","_renderList","order","key","_toDisplayString","$filters","unixToDate","create_at","id","_normalizeClass","is_paid","user","name","Object","values","products","coupon","title","_hoisted_5","_ctx","currency","total","_hoisted_6","_hoisted_7","type","onClick","$event","editProduct","_hoisted_8","deleteOrder","_hoisted_9","_component_pagination","pageInfo","onSetPage","getOrderList","tabindex","_cache","args","hideModal","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","unixToDatetime","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","disabled","$emit","_hoisted_19","_hoisted_20","_hoisted_21","orderItems","reduce","acc","cur","qty","couponInfo","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","item","product","price","origin_price","Math","floor","_hoisted_27","_hoisted_28","final_total","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","address","_hoisted_33","_hoisted_34","message","_hoisted_35","_hoisted_36","tel","email","_hoisted_37","data","modal","props","emits","watch","this","getData","methods","showModal","show","hide","JSON","parse","stringify","percent","code","mounted","Modal","$refs","orderModal","backdrop","__exports__","components","OrderModal","pagination","inject","page","window","scrollTo","top","API_GETORDER","axios","get","then","res","success","orders","emitter","emit","status","catch","e","API_DELETEORDER","delete","current_page","API_UPDATEORDER","put","created","render"],"sourceRoot":""}