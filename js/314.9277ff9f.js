"use strict";(self["webpackChunkproject_macaron"]=self["webpackChunkproject_macaron"]||[]).push([[314],{6955:function(t,e,s){s.d(e,{Z:function(){return j}});var o=s(3396),r=s(7139),n=s(9242);const i={class:"fw-bolder mb-3 ms-2"},c={class:"px-2"},l={class:"mb-1"},a={class:"d-flex justify-content-between"},d=(0,o._)("p",{class:"mb-1"},"小計",-1),u={class:"mb-1"},p=(0,o._)("div",{class:"d-flex justify-content-between"},[(0,o._)("p",{class:"mb-1"},"運費"),(0,o._)("p",{class:"mb-1"},"活動免運")],-1),b={key:0,class:"input-group mb-2 pt-1"},f={key:1,class:"d-flex justify-content-between flex-wrap"},m={class:"w-100 mb-1"},y={class:"mb-1"},w={class:"mb-1 flex-fill text-end"},_={key:2,class:"d-flex justify-content-between"},g=(0,o._)("p",{class:"mb-1"},"優惠券折扣",-1),k=(0,o._)("p",{class:"mb-1 flex-fill text-end"},"-0 元",-1),h=[g,k],v=(0,o._)("p",{class:"mb-1 fs-5 fw-bolder"},"總計",-1),x={class:"mb-1 fs-5 fw-bolder"};function C(t,e,s,g,k,C){const I=(0,o.up)("WebLoading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(I,{"is-loading":k.isLoading},null,8,["is-loading"]),(0,o._)("div",{class:(0,r.C_)(["card border-secondary mb-3 text-secondary",{"border-0":!s.isEdit}])},[(0,o._)("div",{class:(0,r.C_)(["card-body p-3 bg-light",{rounded:s.isEdit}])},[(0,o._)("h5",i,[(0,o.WI)(t.$slots,"title",{},(()=>[(0,o.Uk)("訂單確認")]))]),(0,o._)("div",c,[(0,o._)("p",l," 商品共 "+(0,r.zw)(s.cartInfo.carts.reduce(((t,e)=>t+e.qty),0))+" 件 ",1),(0,o._)("div",a,[d,(0,o._)("p",u,(0,r.zw)(t.$filters.currency(s.cartInfo.total))+" 元",1)]),p]),(0,o._)("div",{class:(0,r.C_)(["px-2 py-1",{"bg-secondary-subtle":s.isEdit,"border-top border-secondary-subtle":!s.isEdit}])},[s.isEdit?((0,o.wg)(),(0,o.iD)("div",b,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control border-secondary border-end-0",placeholder:"輸入優惠碼","onUpdate:modelValue":e[0]||(e[0]=t=>k.couponCode=t)},null,512),[[n.nr,k.couponCode]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:e[1]||(e[1]=(...t)=>C.useCoupon&&C.useCoupon(...t))}," 套用 ")])):(0,o.kq)("",!0),s.cartInfo.carts[0].coupon?((0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("p",m,[(0,o.WI)(t.$slots,"coupon",{},(()=>[(0,o.Uk)("已套用的優惠券：")]))]),(0,o._)("p",y,(0,r.zw)(`${s.cartInfo.carts[0].coupon.code} ${s.cartInfo.carts[0].coupon.title}`),1),(0,o._)("p",w,(0,r.zw)(t.$filters.currency(s.cartInfo.final_total-s.cartInfo.total))+" 元 ",1)])):((0,o.wg)(),(0,o.iD)("div",_,h))],2),(0,o._)("div",{class:(0,r.C_)(["d-flex justify-content-between border-top border-secondary pt-1 px-2",{"border-secondary-subtle":!s.isEdit,"mt-2":s.isEdit}])},[v,(0,o._)("p",x," NT$ "+(0,r.zw)(t.$filters.currency(s.cartInfo.final_total))+" 元 ",1)],2),(0,o.WI)(t.$slots,"button")],2)],2)],64)}var I={data(){return{couponCode:"",isLoading:!1}},props:["cartInfo","isEdit"],inject:["emitter"],methods:{useCoupon(){const t="https://vue3-course-api.hexschool.io/api/nn_macaron/coupon";this.isLoading=!0,this.axios.post(t,{data:{code:this.couponCode}}).then((t=>{this.isLoading=!1,t.data.success?(this.emitter.emit("sendMsg",{message:"已套用優惠",status:"success"}),this.emitter.emit("updateCart")):this.couponError(t.data.message)})).catch((t=>{this.isLoading=!1,this.couponError(t)}))},couponError(t){this.emitter.emit("sendMsg",{message:t,status:"error"})}}},E=s(89);const D=(0,E.Z)(I,[["render",C]]);var j=D},480:function(t,e,s){s.d(e,{Z:function(){return L}});var o=s(3396),r=s(7139),n=s(9242);const i={class:"py-2 px-3 d-flex align-items-baseline justify-content-between"},c={class:"text-secondary mb-0 fw-bolder"},l={class:"list-group rounded-0"},a={class:"d-flex flex-column flex-sm-row"},d={style:{"max-width":"100px"},class:"d-flex align-items-center"},u=["src","alt"],p={class:"px-0 px-sm-3 w-auto align-self-sm-center"},b={key:0,class:"mt-2 mb-0"},f={key:1,class:"mt-2 mb-0"},m={class:"text-danger"},y={class:"badge rounded-pill bg-secondary ms-1",style:{"vertical-align":"baseline"}},w={class:"my-2"},_={key:2,class:"input-group input-group-sm w-auto mb-2"},g=["onClick"],k=(0,o._)("i",{class:"bi bi-dash-lg"},null,-1),h=[k],v={class:"input-group-text bg-white border-start-0 border-end-0 border-secondary"},x=["onClick"],C=(0,o._)("i",{class:"bi bi-plus-lg"},null,-1),I=[C],E={key:3,class:"mb-2"},D={class:"mb-0"},j=["onClick"],$={class:"text-end"};function q(t,e,s,k,C,q){const z=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",i,[(0,o._)("h5",c,[(0,o.WI)(t.$slots,"title",{},(()=>[(0,o.Uk)("購物清單")])),(0,o.Uk)(" ("+(0,r.zw)(s.cartInfo.carts.reduce(((t,e)=>t+e.qty),0))+") ",1)]),s.isEdit?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:"link-gray link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover",onClick:e[0]||(e[0]=(0,n.iM)((t=>this.emitter.emit("cartReset")),["prevent"]))},"清空購物車")):(0,o.kq)("",!0)]),(0,o._)("ul",l,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.cartInfo.carts,((e,n)=>((0,o.wg)(),(0,o.iD)("li",{class:"list-group-item d-flex flex-column-reverse flex-sm-row border-secondary-subtle border-start-0 border-end-0",key:"cart"+n},[(0,o._)("div",a,[(0,o._)("div",d,[(0,o._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-fluid"},null,8,u)]),(0,o._)("div",p,[(0,o.Wm)(z,{to:`/product/${e.product.id}`,class:"fw-bolder link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover",target:"_blank"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.product.title),1)])),_:2},1032,["to"]),e.product.origin_price===e.product.price?((0,o.wg)(),(0,o.iD)("p",b," 單價 NT$"+(0,r.zw)(t.$filters.currency(e.product.origin_price))+"元 ",1)):((0,o.wg)(),(0,o.iD)("p",f,[(0,o.Uk)(" 單件優惠價 "),(0,o._)("span",m,"NT$"+(0,r.zw)(t.$filters.currency(e.product.price))+"元",1),(0,o._)("span",y,(0,r.zw)(Math.floor(e.product.price/e.product.origin_price*10))+"折",1)])),(0,o._)("p",w,"規格："+(0,r.zw)(e.product.unit),1),s.isEdit?((0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("button",{class:(0,r.C_)(["btn btn-outline-secondary",{disabled:1===e.qty}]),type:"button",onClick:t=>q.cartAdjustNum({product_id:e.product.id,qty:e.qty-1},e.id)},h,10,g),(0,o._)("span",v,(0,r.zw)(e.qty),1),(0,o._)("button",{class:(0,r.C_)(["btn btn-outline-secondary",{disabled:10===e.qty}]),type:"button",onClick:t=>q.cartAdjustNum({product_id:e.product.id,qty:e.qty+1},e.id)},I,10,x)])):((0,o.wg)(),(0,o.iD)("p",E,"數量："+(0,r.zw)(e.qty),1)),(0,o._)("p",D,"小計："+(0,r.zw)(e.total)+" 元",1)])]),s.isEdit?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",class:"btn-close ms-auto",onClick:t=>q.emitter.emit("cartDeleteItem",e.id),title:"移除品項"},null,8,j)):(0,o.kq)("",!0)])))),128))]),(0,o._)("div",$,[(0,o._)("a",{href:"#",class:(0,r.C_)(["btn btn-outline-secondary mt-2",{"d-none":!C.scolltopShow||!s.isEdit}]),onClick:e[1]||(e[1]=(0,n.iM)(((...t)=>q.scrolltop&&q.scrolltop(...t)),["prevent"]))},"TOP",2)])],64)}var z={data(){return{scolltopShow:!1}},props:["cartInfo","isEdit"],inject:["emitter"],methods:{cartAdjustNum(t,e){this.emitter.emit("cartAdjustNum",{data:t,cartId:e})},scrolltop(){window.scrollTo({top:0,behavior:"smooth"})}},created(){window.addEventListener("scroll",(()=>{this.scolltopShow=!0}))}},U=s(89);const W=(0,U.Z)(z,[["render",q]]);var L=W},2314:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var o=s(3396);const r={class:"container py-5"},n={key:0,class:"row flex-column-reverse flex-lg-row justify-content-lg-evenly"},i={class:"col-lg-4"},c={class:"col-lg-6"};function l(t,e,s,l,a,d){const u=(0,o.up)("Orderlist"),p=(0,o.up)("router-link"),b=(0,o.up)("OrderCard");return(0,o.wg)(),(0,o.iD)("div",r,[s.cartInfo.carts[0].product?((0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",i,[(0,o.Wm)(u,{"cart-info":s.cartInfo,isEdit:!1},null,8,["cart-info"])]),(0,o._)("div",c,[(0,o.Wm)(b,{"cart-info":s.cartInfo,isEdit:!0},{title:(0,o.w5)((()=>[(0,o.Uk)("訂單確認")])),button:(0,o.w5)((()=>[(0,o.Wm)(p,{to:"/order/purchaserData",class:"btn btn-secondary w-100 mt-3"},{default:(0,o.w5)((()=>[(0,o.Uk)("下一步")])),_:1})])),_:1},8,["cart-info"])])])):(0,o.kq)("",!0)])}var a=s(480),d=s(6955),u={props:["cartInfo"],components:{Orderlist:a.Z,OrderCard:d.Z}},p=s(89);const b=(0,p.Z)(u,[["render",l]]);var f=b}}]);
//# sourceMappingURL=314.9277ff9f.js.map